<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>cookie小结 | 咸鱼老弟</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">cookie小结</h1><a id="logo" href="/.">咸鱼老弟</a><p class="description">【博客园-咸鱼老弟】</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/resource/"><i class="fa fa-university"> 资源</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">cookie小结</h1><div class="post-meta">Mar 12, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是cookie"><span class="toc-number">1.</span> <span class="toc-text">什么是cookie　</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie的作用"><span class="toc-number">2.</span> <span class="toc-text">cookie的作用　</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie的属性"><span class="toc-number">3.</span> <span class="toc-text">cookie的属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie的特性"><span class="toc-number">4.</span> <span class="toc-text">cookie的特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie的分类"><span class="toc-number">5.</span> <span class="toc-text">cookie的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie的操作"><span class="toc-number">6.</span> <span class="toc-text">cookie的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie的实现原理"><span class="toc-number">7.</span> <span class="toc-text">Cookie的实现原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie的安全问题"><span class="toc-number">8.</span> <span class="toc-text">Cookie的安全问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie跨地址，跨域问题以及解决方案"><span class="toc-number">9.</span> <span class="toc-text">cookie跨地址，跨域问题以及解决方案</span></a></li></ol></div></div><div class="post-content"><blockquote>
<p>　　前记：前段时间搞一个活动，开发的时间被严重压缩，忙到飞起，以致于都没怎么写文章了，内疚.<br>　　2月份参加了一场面试，有一些关于cookie的问题回答的不是很好，所以这篇文章我们来对cooKie做一个探讨和总结，查漏补缺。其实本文很早之前都写的差不多了，不过关于cookie跨域方面，查了比较多的资料，始终没有一个太好的结果，所以本文一直没有发布。<br>　　本文的很多内容都是参考网上的资料，可以说是好几篇资料的集合，毕竟是总结嘛，就是将自己觉得有用的东西集合在一起。</p>
</blockquote>
<a id="more"></a>
<h2 id="什么是cookie"><a href="#什么是cookie" class="headerlink" title="什么是cookie　"></a>什么是cookie　</h2><p>　　官方定义：Netscape官方文档中的定义为，Cookie是指在HTTP协议下，服务器或脚本可以维护客户端计算机上信息的一种方式 。通俗地说，Cookie是一种能够让网站Web服务器把少量数据储存到客户端的硬盘或内存里，或是从客户端的硬盘里读取数据的一种技术。 Cookie文件则是指在浏览某个网站时，由Web服务器的CGI脚本创建的存储在浏览器客户端计算机上的一个小文本文件，其格式为：用户名@网站地址 ［数字］.txt。<br>　　再通俗一点的讲，由于HTTP是一种无状态的协议，服务器单从网络连接上无从知道客户身份。怎么办呢？就给客户端们颁发一个通行证，每人一个，无论谁访问都必须携带自己通行证。这样服务器就能从通行证上确认客户身份了。<br><img src="http://images2015.cnblogs.com/blog/776370/201702/776370-20170227220454188-452465694.jpg" alt=""></p>
<h2 id="cookie的作用"><a href="#cookie的作用" class="headerlink" title="cookie的作用　"></a>cookie的作用　</h2><p>　　HTTP协议是一种无状态、无连接的协议，不能在服务器上保持一次会话的连续状态信息。Cookie的作用是记录用户的有关信息，它最根本的用途是帮助Web站点保存有关访问者的信息。如身份识别号码ID、密码、浏览过的网页、停留的时间、用户在Web站点购物的方式或用户访问该站点的次数等，当用户再次链接Web服务器时，浏览器读取Cookie信息并传递给Web站点。　　 
　　　　</p>
<h2 id="cookie的属性"><a href="#cookie的属性" class="headerlink" title="cookie的属性"></a>cookie的属性</h2><p>我们先来看一张图：<br><img src="http://images2015.cnblogs.com/blog/776370/201702/776370-20170227233400204-472517564.png" alt=""><br>　　在谷歌浏览器开发者模式中，我们可以看到网站的cookie，所以，相应的，我们就可以知道cookie的一些属性了，接下来介绍Cookie中的一些属性<br>　　如图所示，cookie具有的属性有 Name、value、Domain、path、Expires/Max-Age、Size、HTTP、Secure等等，我们接下来详细了解了解<br><code>Name：</code><br>该Cookie的名称，一旦创建，名称便不可更改<br><code>value:</code><br>该Cookie的值，如果值为Unicode字符，需要为字符编码,如果值为二进制数据，则需要使用BASE64编码<br><code>domain：</code><br>可以访问该Cookie的域名。如果设置为”.google.com”,则所有以”google.com”结尾的域名都可以访问该Cookie。注意第一个字符必须为“.”<br><strong>这个domain稍作解释：</strong><br>　　非顶级域名，如二级域名或者三级域名，设置的cookie的domain只能为顶级域名或者二级域名或者三级域名本身，不能设置其他二级域名的cookie，否则cookie无法生成。<br>　　顶级域名只能设置domain为顶级域名，不能设置为二级域名或者三级域名，否则cookie无法生成。<br>　　二级域名能读取设置了domain为顶级域名或者自身的cookie，不能读取其他二级域名domain的cookie。所以要想cookie在多个二级域名中共享，需要设置domain为顶级域名，这样就可以在所有二级域名里面或者到这个cookie的值了。<br>顶级域名只能获取到domain设置为顶级域名的cookie，其他domain设置为二级域名的无法获取。<br><code>Path:</code><br>　　path字段为可以访问此cookie的页面路径。 比如domain是abc.com,  path是/detail，那么只有/detail 路径下的页面可以读取此cookie。<br><code>Expires/Max-Age:</code><br>　　该Cookie失效时间，单位秒。如果为正数，则Cookie在maxAge秒之后失效。<br>　　 如果为负数，该Cookie为临时Cookie，关闭浏览器即失效，浏览器也不会以任何形式保存Cookie.<br>　　 如果为0，表示删除Cookie。默认是-1<br><code>Size:</code><br>cookie的大小<br><code>http：</code><br>　　 cookie的httponly属性。若此属性为true，则只有在http请求头中会带有此cookie的信息，而不能通过document.cookie来访问此cookie。<br>比如截图中的__jsluid<br><code>secure：</code><br>  设置是否只能通过https来传递此条cookie</p>
<h2 id="cookie的特性"><a href="#cookie的特性" class="headerlink" title="cookie的特性"></a>cookie的特性</h2><p>1、一个浏览器针对一个网站最多存20个Cookie，浏览器一般只允许存放300个Cookie<br>2、每个Cookie的长度不能超过4KB（稀缺）。但不同的浏览器实现的不同<br>3、Cookie的不可跨域名性。<br>　　例如：Cookie在客户端是由浏览器来管理的，浏览器能够保证Google只会操作Google的Cookie而不会操作Baidu的Cookie，从而保证用户的隐私安全。</p>
<h2 id="cookie的分类"><a href="#cookie的分类" class="headerlink" title="cookie的分类"></a>cookie的分类</h2><p>cookie有两种类型：</p>
<ul>
<li>临时Cookie（会话Cookie）</li>
<li>永久Cookie<br>　　不设置过期时间，则表示这个cookie生命周期为浏览器会话期间，只要关闭浏览器窗口，cookie就消失了。这种生命期为浏览会话期的cookie被称为会话cookie。会话cookie一般不保存在硬盘上而是保存在内存里。可以类比于本地存储的sessionstore<br>　　设置了过期时间，浏览器就会把cookie保存到硬盘上，关闭后再次打开浏览器，这些cookie依然有效直到超过设定的过期时间。<br>　　存储在硬盘上的cookie可以在不同的浏览器进程间共享，比如两个IE窗口。而对于保存在内存的cookie，不同的浏览器有不同的处理方式。可以类比于本地存储的localstore</li>
</ul>
<h2 id="cookie的操作"><a href="#cookie的操作" class="headerlink" title="cookie的操作"></a>cookie的操作</h2><p><strong>1、 cookie的发送：</strong><br>　　服务器端像客户端发送Cookie是通过HTTP响应报文实现的，在Set-Cookie中设置需要像客户端发送的cookie，cookie格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">·Set-Cookie: &quot;name=value;domain=.domain.com;path=/;expires=Sat, 11 Jun 2016 11:29:42 GMT;HttpOnly;secure&quot;</span><br></pre></td></tr></table></figure></p>
<p>其中<code>name=value</code>是必选项，其它都是可选项。<br><img src="https://segmentfault.com/img/bVthn4?_=6476991" alt=""><br>　　客户端的话用js即可操作，由于现在客户端设置大部分用H5的本地存储localstore和sessionstore多一点，所以客户端的这里不做介绍</p>
<p><strong>2、cookie的读取</strong><br>　这里介绍的js来读取cookie，可以直接使用下面的方法，其实就是用document.cookie：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cookieName=<span class="built_in">encodeURIComponent</span>(name)+<span class="string">"="</span>,</span><br><span class="line">    cookieStart=<span class="built_in">document</span>.cookie.indexOf(cookieName),</span><br><span class="line">    cookieValue=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(cookieStart&gt;<span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> cookieEnd=<span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>,cookieStart);</span><br><span class="line">        <span class="keyword">if</span>(cookieEnd==<span class="number">-1</span>)&#123;</span><br><span class="line">            cookieEnd=<span class="built_in">document</span>.cookie.Length;</span><br><span class="line">        &#125;</span><br><span class="line">        cookieValue=<span class="built_in">decodeURIComponent</span>(<span class="built_in">document</span>.cookie.substring(cookieStart+<span class="built_in">document</span>.cookie.length,cookieEnd));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cookieValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong> 3、cookie的修改与删除 </strong><br>　　Cookie并不提供修改、删除操作。如果要修改某个Cookie，只需要新建一个同名的Cookie，添加到response中覆盖原来的Cookie。<br>　　如果要删除某个Cookie，只需要新建一个同名的Cookie，并将maxAge设置为0，并添加到response中覆盖原来的Cookie。注意是0而不是负数。</p>
<h2 id="Cookie的实现原理"><a href="#Cookie的实现原理" class="headerlink" title="Cookie的实现原理"></a>Cookie的实现原理</h2><p> 　　Cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。如下图所示：<br><img src="http://hi.csdn.net/attachment/201111/9/0_13208318702UfF.gif" alt=""></p>
<p>这个跟其实跟浏览器你器缓存有点类似，具体的过程我们可以分解分解：<br>（1）客户端在浏览器的地址栏中键入Web服务器的URL，浏览器发送读取网页的请求。<br>（2）服务器接收到请求后，产生一个Set-Cookie报头，放在HTTP报文中一起回传客户端，发起一次会话。<br>（3）客户端收到应答后，若要继续该次会话，则将Set-Cook-ie中的内容取出，形成一个Cookie.txt文件储存在客户端计算机里。<br>（4）当客户端再次向服务器发出请求时，浏览器先在电脑里寻找对应该网站的Cookie.txt文件。如果找到，则根据此Cookie.txt产生Cookie报头，放在HTTP请求报文中发给服务器。<br>（5）服务器接收到包含Cookie报头的请求，检索其Cookie中与用户有关的信息，生成一个客户端所请示的页面应答传递给客户端。 浏览器的每一次网页请求，都可以传递已存在的Cookie文件，例如，浏览器的打开或刷新网页操作。</p>
<h2 id="Cookie的安全问题"><a href="#Cookie的安全问题" class="headerlink" title="Cookie的安全问题"></a>Cookie的安全问题</h2><p>　　通常cookie信息都是使用http连接传递数据，这种传递方式很容易被查看，而且js里面直接有一个document.cookie方法，可以直接获取到用户的cooie,所以cookie存储的信息容易被窃取。假如cookie中所传递的内容比较重要，那么就要求使用加密的数据传输。</p>
<p><strong>如何来防范cookie的安全呢？有以下几种方法：</strong></p>
<ul>
<li>HttpOnly属性<br>　　 如果在Cookie中设置了”HttpOnly”属性，那么通过程序(JS脚本、Applet等)将无法读取到Cookie信息，这样能有效的防止XSS攻击。</li>
<li>secure属性<br>　　当设置为true时，表示创建的 Cookie 会被以安全的形式向服务器传输，也就是只能在 HTTPS 连接中被浏览器传递到服务器端进行会话验证，如果是 HTTP 连接则不会传递该信息，所以不会被盗取到Cookie 的具体内容。<br>　　我们再来看看一道经典的面试题：<br><code>登录时候用cookie的话，安全性问题怎么解决？</code><br>这个问题，网上找了比较久的答案，比较满意的有两种答案（答案是网上找的）<blockquote>
<p>第1种是：<br>把用户对象（包含了用户ID、用户名、是否登录..）序列化成字符串再加密存入Cookie。<br>密钥是：客户端IP+浏览器Agent+用户标识+固定的私有密钥<br>当cookie被窃取后，只要任一信息不匹配，就无法解密cookie，进而也就不能登录了。<br>这样做的缺点是IP不能变动、频繁加密解密会加重CPU负担</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>第2种是：<br>将用户的认证信息保存在一个cookie中，具体如下： </p>
<ol>
<li>cookie名：uid。推荐进行加密，比如MD5(‘站点名称’)等。 </li>
<li>cookie值：登录名|有效时间Expires|hash值。hash值可以由”登录名+有效时间Expires+用户密码（加密后的）的前几位 +salt” (salt是保证在服务器端站点配置文件中的随机数)<br>这样子设计有以下几个优点：<br>1.即使数据库被盗了，盗用者还是无法登录到系统，因为组成cookie值的salt是保证在服务器站点配置文件中而非数据 库。<br>2.如果账户被盗了，用户修改密码，可以使盗用者的cookie值无效。<br>3.如果服务器端的数据库被盗了，通过修改salt值可以使所有用户的cookie值无效，迫使用户重新登录系统。<br>4.有效时间Expires可以设置为当前时间+过去时间（比如2天），这样可以保证每次登录的cookie值都不一样，防止盗用者 窥探到自己的cookie值后作为后门，长期登录。</li>
</ol>
</blockquote>
<h2 id="cookie跨地址，跨域问题以及解决方案"><a href="#cookie跨地址，跨域问题以及解决方案" class="headerlink" title="cookie跨地址，跨域问题以及解决方案"></a>cookie跨地址，跨域问题以及解决方案</h2><p>　　cookie是不能跨域访问的，那么，假如需要跨域来进行cookie的访问和传递，该怎么办呢？查找了比较多的资料，比较少这方面的资料，<br>　　在cookie跨域这个问题上，前端能做的不多，很多都是需要和后端一起配合来完成。<br>　　总结了下面的几种方法，具体的实现过程这里没有写，可以点击我提供的链接自己看看。<br>　　前2种具体的实现方法可以点击看这里:<a href="http://www.cnblogs.com/hujunzheng/p/5744755.html" target="_blank" rel="noopener">点我</a><br><strong>1、nginx方向代理：</strong><br>　　反向代理（Reverse Proxy）方式是指以代理服务器来接受Internet上的连接请求，然后将请求转发给内部网络上的服务器；并将从服务器上得到的结果返回给Internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。<br>　　反向代理服务器对于客户端而言它就像是原始服务器，并且客户端不需要进行任何特别的设置。客户端向反向代理 的命名空间(name-space)中的内容发送普通请求，接着反向代理将判断向何处(原始服务器)转交请求，并将获得的内容返回给客户端，就像这些内容 原本就是它自己的一样。<br><strong>2、jsonp方法：</strong><br>　　这个方法和我们平时处理js跨域的jsonp方法一样。具体实现方法可以看看淘宝的解决方法，<a href="http://developer.51cto.com/art/201104/255729.htm" target="_blank" rel="noopener">点我</a>　<br><strong>3、nodejs的superagent</strong><br><strong>4、iframe方法：</strong><br>比如有个<code>www.a.com/index.html</code>的页面，往<code>www.b.com/index.html</code>的页面传递cookie<br><code>www.a.com/index.html</code>这样写：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>我是a页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.cookie = <span class="string">"name="</span> + <span class="string">"value;"</span> + <span class="string">"expires="</span> + <span class="string">"datatime;"</span> + <span class="string">"domain="</span> + <span class="string">""</span> + <span class="string">"path="</span> + <span class="string">"/path"</span> + <span class="string">"; secure"</span>;</span></span><br><span class="line"><span class="javascript"><span class="comment">//name Cookie名字</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//value Cookie值</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//expires 有效期截至(单位毫秒)</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//path 子目录</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//domain 有效域</span></span></span><br><span class="line"><span class="javascript"><span class="comment">//secure 是否安全</span></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.location = <span class="string">"http://www.b.com/index.html?"</span> + <span class="built_in">document</span>.cookie;  <span class="comment">//跳转到b页面</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>www.b.com/index.html 这样写：</p>
<pre><code class="html"><span class="meta">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>
<span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>我是b页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
<span class="tag">&lt;/<span class="name">head</span>&gt;</span>
<span class="tag">&lt;<span class="name">body</span>&gt;</span>
   <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">'http://www.a.com/index.html'</span> <span class="attr">width</span>=<span class="string">'100'</span> <span class="attr">height</span>=<span class="string">'100'</span> <span class="attr">style</span>=<span class="string">"display:none"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>
<span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span>
<span class="javascript"><span class="keyword">var</span> url = <span class="built_in">window</span>.location.toString();<span class="comment">//获取地址</span></span>
<span class="javascript"><span class="keyword">var</span> get = url.substring(url.indexOf(<span class="string">"abc"</span>));<span class="comment">//获取变量和变量值</span></span>
<span class="javascript"><span class="keyword">var</span> idx = get.indexOf(<span class="string">"="</span>);<span class="comment">//获取变量名长度</span></span>
<span class="javascript"><span class="keyword">if</span> (idx != <span class="number">-1</span>) {</span>
<span class="javascript">   <span class="keyword">var</span> name = get.substring(<span class="number">0</span>, idx);<span class="comment">//获取变量名</span></span>
<span class="javascript">   <span class="keyword">var</span> val = get.substring(idx + <span class="number">1</span>);<span class="comment">//获取变量值</span></span>
<span class="javascript">   setCookie(name, val, <span class="number">1</span>);<span class="comment">//创建Cookie</span></span>
<span class="undefined">}</span>
<span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span>
</code></pre>
<p>备注：本文主要是查找了网上比较多的资料来总结cookie的一些知识，文笔有限，有误之处，欢迎指出</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://xianyulaodi.github.io/2017/03/12/cookie小结/" data-id="cjezvpkxz000kf8p6s3zsy7gk" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMklEQVR42u3aQQ7DIAxE0dz/0uk2UhQy46GRMJ9VFbXA64LYxschj/Myrk/G37z/6v7N8SqTBwwYMJZlnMPhMpS1auu+/DUwYMDYgKEsOf48Bo/Z+vyPz2HAgAEjoM6aEwYMGDDc6eYex7VUGQYMGLsxlGRSwUtLCrWyP+biMGDAWJBRK5N98/kv9xswYMBYinGaY1w+GweCyfXny65gwIDRmlEL3WYdx0mzBQwYMPZhuBeQykGpJ73JUX4kU8OAAWMpRm06N2TUC2p6QPn43oABA0Y7htuoOj589SRWL+pJzWQwYMBozXADu2ToV5vKn2W8N2DAgNGC4YZxtdJYfmFQvHeFAQNGC4abWCqlfLeRyw03jdAQBgwYjRhJyqqnwfr1p30JCgMGjNaML8M+9wi201cYMGC0Y+hXksnzWhuZ3TMCAwaMDRj6kacvkLRiKGHi400sDBgwGjGSSrtyWCdXDu7eYMCAsQPDLdzrW0maz9xWDBgwYOzAcA9TvayfhI9GUAgDBoymDHeLtTAuKflNaLaAAQNGC0ateaLW7JUkz4/rwoABYwOGsvyswNFtHbPfGzBgwGjEOM3hNlso7Rfu/MX8GwYMGMsyauFa7YDWg8XakQ0DBozejDzg+6Yh46WEBwMGjA0YRtYbNG+5gaOBhAEDBoxSMJds3U5iYcCAAcMs6+sFu1qSPOHAhQEDxoKMfGH3wkAv2E0ut8GAAWNBRtSpISeZeeLq7gQGDBgtGD/sZLJQqg4OkQAAAABJRU5ErkJggg==" class="article-share-link">分享</a><div class="tags"><a href="/tags/博客园迁移/">博客园迁移</a><a href="/tags/cookie/">cookie</a></div><div class="post-nav"><a href="/2017/03/22/老生常谈-从输入url到页面展示到底发生了什么/" class="pre">老生常谈-从输入url到页面展示到底发生了什么</a><a href="/2017/02/26/以setTimeout来聊聊Event Loop/" class="next">以setTimeout来聊聊Event Loop</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'xianyulaodi',
  repo: 'myBlogCommentRepo',
  oauth: {
    client_id: 'bb8f1145bdd0717d9830',
    client_secret: 'b18dc8d3b04cea043cb47d083049276cd93e0503',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://xianyulaodi.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/高阶函数/" style="font-size: 15px;">高阶函数</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/BigPipe/" style="font-size: 15px;">BigPipe</a> <a href="/tags/expess/" style="font-size: 15px;">expess</a> <a href="/tags/博客园迁移/" style="font-size: 15px;">博客园迁移</a> <a href="/tags/cookie/" style="font-size: 15px;">cookie</a> <a href="/tags/mongoose/" style="font-size: 15px;">mongoose</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/path/" style="font-size: 15px;">path</a> <a href="/tags/fs/" style="font-size: 15px;">fs</a> <a href="/tags/setTimeout/" style="font-size: 15px;">setTimeout</a> <a href="/tags/Eventloop/" style="font-size: 15px;">Eventloop</a> <a href="/tags/npm/" style="font-size: 15px;">npm</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/vuex/" style="font-size: 15px;">vuex</a> <a href="/tags/vue-router/" style="font-size: 15px;">vue-router</a> <a href="/tags/router/" style="font-size: 15px;">router</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/正则/" style="font-size: 15px;">正则</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/03/20/一次code review引发的思考/">一次code review引发的思考</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/25/如何写一个npm包/">如何写一个npm包</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/10/BigPipe小探/">BigPipe小探</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/22/将中文转为拼音首字母/">js提取中文拼音首字母</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/29/给女朋友写的一个简书爬虫/">给女朋友写的一个简书爬虫</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/24/nodejs学习小结/">nodejs学习小结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/12/express图片上传/">express图片上传</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/浅析css中的cursor/">浅析css中的cursor</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/03/javascript高阶函数/">javascript高阶函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/18/手写一个router/">手写一个router</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-money"> 请博主喝咖啡</i><img src="/img/WeChatQR.png"/></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.cnblogs.com/xianyulaodi/" title="我的博客园" target="_blank">我的博客园</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">咸鱼老弟.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>